<title>Serious Search</title>
<link rel="icon" href="./icon.png">
<link rel="stylesheet" href="./searchmod.css">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

<body>
    <center>
        <div style="margin-top:10px;"><h1 style="display: flex; align-items: center; justify-content: center; gap: 10px;">
            C. Peterson's
            <a href="./">
                <img src="./serious.webp" style="height:50px;">
            </a>
        </h1></div>
    </center>

    <!-- Div to display a message before search -->

    <script async src="https://cse.google.com/cse.js?cx=8663a9f19e81d4e79"></script>
    <div class="gcse-search" data-linktarget="_blank"></div>
	
	<div id="introDiv" style="margin-top:-60px;">
        <div class="links"><center><h4>School links:</h4>
		<ul>
			<li><a href="https://merewetherhs.instructure.com" target="_blank">MHS Canvas</a></li>
			<li><a href="https://classroom.google.com" target="_blank">Google Classroom</a></li>
			<li><a href="https://mail.google.com/mail/u/0/" target="_blank">GMail</a></li>
			<li><a href="https://merewether-h.sentral.com.au/" target="_blank">MHS Sentral</a></li>
			<li><a href="https://oliver-4.library.det.nsw.edu.au/5/home/news" target="_blank">Oliver Library</a></li>
			<li><a href="https://www.mybib.com/tools/apa-citation-generator" target="_blank">APA Generator</a></li>
			<li><a href="https://learn.getatomi.com/login" target="_blank">Atomi</a></li>
			<li><a href="https://scholar.google.com/" target="_blank">Google Scholar</a></li>
		</ul></center></div>

		<div class="iframe-container">
            <iframe id="news" src="http://68k.news/index.php?section=world&loc=US"></iframe>
            <div class="overlay"></div> <!-- Prevent scrolling above 100px -->
        </div>
		
		<div class="navbar" style="position:absolute; bottom:10; left:0; width:100vw;">
		<ul>
			<li>PSA: this page is viewed best on an <a href="https://www.instagram.com/anstobel/" target="_blank">ANSTOBEL</a> computer</li>
			<li><a href="https://coastalcustomcandles.rf.gd" target="_blank">Buy a candle</a></li>
			<li>Bored? <a href="https://worlddomination.rf.gd" target="_blank">Take over the world!</a> (just not on school wifi)</li>
		</ul>
    </div>

    <style>
		        .iframe-container {
            position: relative;
            width: 70vw;
            height: 60vh;
            margin: 20px auto;
			border-style: solid;
            overflow: hidden; /* Prevent user from scrolling beyond boundaries */
        }

        /* iFrame styling */
        #news {
            width: calc(100% + 15px);
            height: calc(100% + 110px);
			border-style:none;
			margin-top:-110px;
        }
		
		body {
            background-color: white;
            font-family: Arial;
            margin: 0;
        }

        #introDiv {
            transition: opacity 0.3s ease;
        }
		
		ul {
			list-style-position: inside;
			padding: 0;
			margin: 0;
        }
        .links li {
            display: inline-block;
            margin: 0 10px;
        }
		.navbar li {
			display: inline-block;
			padding:10px;
			border-style: solid;
			border-width:1px;
		}
    </style>
	
    <script>		
	// Ensure iframe starts scrolled 100px down and cannot be scrolled back up
        const iframe = document.getElementById('news');

        iframe.addEventListener('load', () => {
            try {
                // Access the iframe's document (only works if same-origin policy is satisfied)
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

                // Scroll down 100px initially
                iframeDoc.documentElement.scrollTop = 100;

                // Prevent scrolling above 100px
                iframeDoc.addEventListener('scroll', () => {
                    if (iframeDoc.documentElement.scrollTop < 100) {
                        iframeDoc.documentElement.scrollTop = 100;
                    }
                });
            } catch (e) {
                console.warn('Cannot access iframe content due to cross-origin policy.');
            }
        });
		
		// Function to check if search results are visible
        function checkSearchResults() {
            const introDiv = document.getElementById('introDiv');
            const resultsContainer = document.querySelector('.gsc-results-wrapper-visible');

            if (resultsContainer) {
                introDiv.style.opacity = '0'; // Hide the intro div with animation
                setTimeout(() => (introDiv.style.display = 'none'), 300); // Fully hide after animation
            } else {
                introDiv.style.display = 'block';
                setTimeout(() => (introDiv.style.opacity = '1'), 0); // Show with animation
            }
        }

        // Monitor changes in search results
        window.addEventListener('load', () => {
            setInterval(checkSearchResults, 500); // Check every 500ms for changes
        });
    </script>
</body>
